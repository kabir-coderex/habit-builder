# Netlify configuration for Family Routine Assistant
# This monorepo contains two sites: guardian-dashboard and pwa
# Create two separate sites in Netlify and customize these settings for each.

[build]
  # For guardian-dashboard site, use:
  # command = "pnpm run build --filter=guardian-dashboard"
  # base = "apps/guardian-dashboard"
  
  # For PWA site, use:
  # command = "pnpm run build --filter=pwa"
  # base = "apps/pwa"
  
  command = "pnpm run build --filter=guardian-dashboard"
  publish = "apps/guardian-dashboard/.next"
  base = "."

# Environment variables needed for both sites:
# NEXT_PUBLIC_SUPABASE_URL
# NEXT_PUBLIC_SUPABASE_ANON_KEY
# (Set these in Netlify UI under Site settings > Environment variables)

# The Netlify Next.js plugin is essential for enabling server-side features,
# middleware, and other advanced functionalities on Netlify's platform.
[[plugins]]
  package = "@netlify/plugin-nextjs"

# Redirects for SPA routing
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
